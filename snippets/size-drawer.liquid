{%- liquid
  assign drawer_product_form_id = product_form_id
  if drawer_product_form_id == blank
    assign drawer_product_form_id = 'product-form-' | append: section_id
  endif
-%}

<div
  id="size-drawer-{{ section_id }}"
  class="size-drawer"
  data-section-id="{{ section_id }}"
  aria-hidden="true"
>
  <div class="size-drawer__overlay" data-size-drawer-close></div>
  <div
    class="size-drawer__content"
    role="dialog"
    aria-modal="true"
    aria-labelledby="size-drawer-title-{{ section_id }}"
  >
    <header class="size-drawer__header">
      <h3 id="size-drawer-title-{{ section_id }}">Escolha o tamanho</h3>
      <button type="button" class="size-drawer__close" data-size-drawer-close aria-label="Fechar">
        <span aria-hidden="true">&times;</span>
      </button>
    </header>
    <div class="size-drawer__body">
      <div class="size-drawer__guide">
        <a href="/pages/guia-de-tamanhos" target="_blank" rel="noopener">
          Guia de tamanhos
        </a>
      </div>
      <div
        id="size-options-{{ section_id }}"
        class="size-drawer__options"
        role="listbox"
        aria-label="Selecionar tamanho"
      ></div>
      <p
        id="size-drawer-status-{{ section_id }}"
        class="size-drawer__status"
        role="status"
        aria-live="polite"
      ></p>
    </div>
  </div>
</div>

<script>
  console.log('Size drawer snippet rendering for section:', '{{ section_id }}');
  window.themeSizeDrawerData = window.themeSizeDrawerData || {};
  window.themeSizeDrawerData['{{ section_id }}'] = {
    productId: {{ product.id }},
    sectionId: '{{ section_id }}',
    productFormId: {{ drawer_product_form_id | json }},
    variants: {{ product.variants | json }},
    options: {{ product.options_with_values | json }},
    colorOptionIndex: -1,
    sizeOptionIndex: -1
  };
  console.log('Size drawer data set for section {{ section_id }}:', window.themeSizeDrawerData['{{ section_id }}']);
</script>
