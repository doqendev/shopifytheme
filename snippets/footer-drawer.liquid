{{ 'section-footer.css' | asset_url | stylesheet_tag }}
{{ 'component-newsletter.css' | asset_url | stylesheet_tag }}
{{ 'component-list-menu.css' | asset_url | stylesheet_tag }}
{{ 'component-list-payment.css' | asset_url | stylesheet_tag }}
{{ 'component-list-social.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .footer {
    margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px;
  }

  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  } 

  /* On larger screens hide the mobile-only menu */
  @media screen and (min-width: 750px) {
    .footer {
      margin-top: {{ section.settings.margin_top }}px;
    }

    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
    .mobile-menu {
      display: none;
    }
  }

  #NewsletterForm--template--24455438926148__sticky_product_bar_HRGKtD {
    border-color: red;
  }

  .newsletter-title {
    font-weight: 600;
    margin-bottom: 13px;
    font-size: 14px;
    line-height: 18px;
    letter-spacing: .56px;
  }

  .newsletter-description {
    font-weight: 500;
    margin-bottom: 12px;
    font-size: 13px;
    line-height: 18px;
    letter-spacing: .56px;
    margin-bottom: 20px;
  }
  
  .field__input {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    border-bottom: none;
    padding: 8px 0;
  }

  .newsletter-form__field-wrapper .field__input {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
  }

  .footer {
    border: none;
  }

  .footer-block--newsletter {
    margin-top: 50px;
    margin-bottom: 100px;
    margin-right: 40px;
    margin-left: 40px;
}

  .footer-static-image {
    text-align: center;
  }

  .footer-static-image img {
    display: inline-block;
    width: auto; /* Maintains aspect ratio */
  }

  .banner-container {
    width: 100%;
  }

  /* Accordion styles scoped to the mobile footer */
  .mobile-menu .submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }
  .mobile-menu .menu-item.open .submenu {
    max-height: 70vh;
    overflow-y: auto;
    overscroll-behavior: contain;
  }
  .mobile-menu .submenu-arrow {
    display: inline-block;
    transition: transform 0.3s ease;
  }
  .mobile-menu .menu-item.open .submenu-arrow {
    transform: rotate(180deg);
  }

  /* Bold open title in mobile footer */
  .mobile-menu .menu-item.open > .menu-link {
    font-weight: 700;
  }

  /* Layout adjustments when used inside editorial sections */
  .editorial-footer {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  .editorial-footer .footer__content-top {
    flex-grow: 1;
  }
  .editorial-footer .footer__content-bottom {
    margin-top: auto;
  }

  /* Mobile footer theme */
  .footer-mobile .footer {
    background-color: #000;
    color: #fff;
  }
  .footer-mobile .footer a {
    color: #fff;
  }

  /* Newsletter styling */
  .footer-mobile .newsletter-title,
  .footer-mobile .newsletter-description {
    color: #fff;
  }
  .footer-mobile .field__input {
    border-bottom: 1px solid #fff;
    background: transparent;
    color: #fff;
  }
  .footer-mobile .field__label {
    color: #fff;
  }
  .footer-mobile .field__input::placeholder {
    color: #fff;
    opacity: 0.7;
  }
  .footer-mobile .newsletter-form__button {
    color: #fff;
    background: transparent;
  }

  /* Accordion modern look */
  .footer-mobile .mobile-menu .menu-item {
    border-bottom: 1px solid #333;
    margin-bottom: 0;
  }
  .footer-mobile .mobile-menu .menu-item:first-child {
    border-top: 1px solid #333;
  }
  .footer-mobile .mobile-menu .menu-link {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.2rem 0;
    color: #fff;
    text-decoration: none;
  }
  .footer-mobile .mobile-menu .submenu {
    padding: 0 0 1.2rem 0;
  }
  .footer-mobile .mobile-menu .submenu-list {
    list-style: none;
    padding-left: 0;
    margin: 0;
  }
  .footer-mobile .mobile-menu .submenu-list a {
    color: #fff;
    font-size: 0.875rem;
  }

{%- endstyle -%}

<footer class="footer color-{{ section.settings.color_scheme }} gradient section-{{ section.id }}-padding{% if editorial_mode %} editorial-footer{% endif %}">
  <!-- Scrolling Marquee -->
  <!-- Scrolling Marquee -->

  <!-- Newsletter Section: Always visible -->
  <div class="footer__content-top page-width">
    <div class="footer-block--newsletter">
      <div class="footer-block__newsletter">
        <!-- Newsletter Header -->
        <div class="newsletter-header">
          <h2 class="newsletter-title">NEWSLETTER</h2>
          <h3 class="newsletter-description">
            Subscreva a nossa newsletter e não perca as últimas novidades!
          </h3>
        </div>
        {%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">
          <div class="newsletter-form__field-wrapper">
            <div class="field">
              <input
                id="NewsletterForm--{{ section.id }}"
                type="email"
                name="contact[email]"
                class="field__input"
                value="{{ form.email }}"
                aria-required="true"
                autocorrect="off"
                autocapitalize="off"
                autocomplete="email"
                placeholder="{{ 'newsletter.label' | t }}"
                required
              >
              <label class="field__label" for="NewsletterForm--{{ section.id }}">
                {{ 'newsletter.label' | t }}
              </label>
              <button
                type="submit"
                class="newsletter-form__button field__button"
                name="commit"
                id="Subscribe"
                aria-label="{{ 'newsletter.button_label' | t }}"
              >
                <span class="svg-wrapper">
                  {{ 'icon-arrow.svg' | inline_asset_content }}
                </span>
              </button>
            </div>
            {%- if form.errors -%}
              <small class="newsletter-form__message form__message" id="ContactFooter-error">
                <span class="svg-wrapper">
                  {{ 'icon-error.svg' | inline_asset_content }}
                </span>
                {{ form.errors.translated_fields.email | capitalize }}
                {{ form.errors.messages.email }}
              </small>
            {%- endif -%}
          </div>
          {%- if form.posted_successfully? -%}
            <h3
              class="newsletter-form__message newsletter-form__message--success form__message"
              id="ContactFooter-success"
              tabindex="-1"
              autofocus
            >
              <span class="svg-wrapper">
                {{ 'icon-success.svg' | inline_asset_content }}
              </span>
              {{ 'newsletter.success' | t }}
            </h3>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>

    <!-- Static Centered Image 
    <div class="banner-container">
      <div class="footer-static-image">
        <img src="{{ 'cheyenne_final_banner3.svg' | asset_url }}" alt="Static Footer Image" width="300" height="auto">
      </div>
    </div> -->

    <!-- Mobile Only: Static Menu below the newsletter -->
    <div class="mobile-menu" style="margin-top: 20px; margin-left: 5%; margin-right: 5%;">
      <nav class="menu-drawer__navigation static-menu">
        <ul class="menu-drawer__menu list-menu" role="list">
          <li class="menu-item has-submenu">
            <a href="#" class="menu-link">
              AJUDA
              <span class="submenu-arrow">▼</span>
            </a>
            <div class="submenu">
              <ul class="submenu-list">
                <li><a href="https://cheyenne.pt/pages/como-comprar-online">COMO COMPRAR ONLINE</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">PAGAMENTO</a></li>
                <li><a href="https://cheyenne.pt/pages/envio">ENVIO</a></li>
                <li><a href="https://cheyenne.pt/pages/trocas-e-devolucoes">TROCAS E DEVOLUÇÕES</a></li>
                <li><a href="https://cheyenne.pt/pages/guia-de-tamanhos">GUIA DE TAMANHOS</a></li>
              </ul>
            </div>
          </li>
          <li class="menu-item has-submenu">
            <a href="#" class="menu-link">
              APOIO AO CLIENTE
              <span class="submenu-arrow">▼</span>
            </a>
            <div class="submenu">
              <ul class="submenu-list">
                <li><a href="/collections/shoes-sneakers">COMO PODEMOS AJUDAR?</a></li>
                <li><a href="/collections/shoes-boots">CONTACTO</a></li>
                <li><a href="/collections/shoes-sandals">ESTADO DO SEU PEDIDO</a></li>
                <li><a href="/collections/shoes-sandals">ENCONTRA O SEU RECIBO</a></li>
              </ul>
            </div>
          </li>
          <li class="menu-item has-submenu">
            <a href="#" class="menu-link">
              EMPRESA
              <span class="submenu-arrow">▼</span>
            </a>
            <div class="submenu">
              <ul class="submenu-list">
                <li><a href="/collections/shoes-sneakers">QUEM SOMOS</a></li>
                <li><a href="/collections/shoes-boots">LOJAS</a></li>
              </ul>
            </div>
          </li>
          <li class="menu-item has-submenu">
            <a href="#" class="menu-link">
              MÉTODOS DE PAGAMENTO
              <span class="submenu-arrow">▼</span>
            </a>
            <div class="submenu">
              <ul class="submenu-list">
                <li><a href="https://cheyenne.pt/pages/pagamento">VISA</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">MASTERCARD</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">GIFT CARD</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">PAYPAL</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">APPLEPAY</a></li>
                <li><a href="https://cheyenne.pt/pages/pagamento">GOOGLEPAY</a></li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </div>

  <!-- Footer Bottom: Copyright & Policies -->
  <div class="footer__content-bottom">
    <div class="footer__content-bottom-wrapper page-width">
      <div class="footer__column footer__localization isolate"></div>
      <div class="footer__column footer__column--info"></div>
    </div>
    <div class="footer__content-bottom-wrapper page-width">
      <div class="footer__copyright caption">
        <small class="copyright__content">
          &copy; {{ 'now' | date: '%Y' }}, {{ shop.name | link_to: routes.root_url }}
        </small>
        <ul class="policies list-unstyled">
          {%- for policy in shop.policies -%}
            {%- if policy != blank -%}
              <li>
                <small class="copyright__content">
                  <a href="{{ policy.url }}">{{ policy.title | escape }}</a>
                </small>
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </div>
    </div>
  </div>

  <script>
    document.querySelectorAll('.menu-item.has-submenu > .menu-link').forEach(link => {
      link.addEventListener('click', e => {
        e.preventDefault();
        const item = link.parentElement;
        // Close any other open panels
        document.querySelectorAll('.menu-item.has-submenu.open')
          .forEach(openItem => {
            if (openItem !== item) openItem.classList.remove('open');
          });
        // Toggle this one
        item.classList.toggle('open');
      });
    });
  </script>
</footer>
