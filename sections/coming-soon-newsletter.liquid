{{ 'coming-soon-newsletter.css' | asset_url | stylesheet_tag }}

<div
  id="ComingSoonNewsletter-{{ section.id }}"
  class="coming-soon-section"
  {% if section.settings.background_image != blank %}
    style="background-image: url('{{ section.settings.background_image | img_url: '2048x' }}');"
  {% endif %}
>
  {%- comment -%}
    If a mobile image is set, override the background-image on small screens
  {%- endcomment -%}
  {% if section.settings.mobile_background_image != blank %}
    <style>
      @media screen and (max-width: 749px) {
        #ComingSoonNewsletter-{{ section.id }} {
          background-image: url('{{ section.settings.mobile_background_image | img_url: '2048x' }}') !important;
        }
      }
    </style>
  {% endif %}

  {%- comment -%}
    LOGO: only render if the merchant has uploaded one in the theme editor
  {%- endcomment -%}
  {% if section.settings.logo_image != blank %}
    <div class="coming-soon-logo">
      <img
        src="{{ section.settings.logo_image | img_url: '500x' }}"
        alt="Logo"
      />
    </div>
  {% endif %}

  <div class="coming-soon-content">
    <!-- Main Heading (editable) -->
    <h1 class="coming-soon-title">
      {{ section.settings.heading_text }}
    </h1>

    <!-- Subheading (editable) -->
    <p class="coming-soon-subtitle">
      {{ section.settings.subheading_text }}
    </p>

    <!-- Email-Signup Form -->
    <div class="coming-soon-form-wrapper">
      {% form 'customer', class: 'coming-soon-form' %}
        <input type="hidden" name="contact[tags]" value="newsletter">

        <div class="coming-soon-field">
          <input
            id="ComingSoonEmail-{{ section.id }}"
            type="email"
            name="contact[email]"
            placeholder="{{ section.settings.input_placeholder }}"
            required
            aria-required="true"
          >
          <button
            type="submit"
            class="coming-soon-button"
            aria-label="{{ section.settings.button_label }}"
          >
            {{ section.settings.button_label }}
          </button>
        </div>

        {% if form.errors %}
          <p class="coming-soon-error" tabindex="-1">
            {{ form.errors.messages.email }}
          </p>
        {% endif %}

        {% if form.posted_successfully? %}
          <p class="coming-soon-success" tabindex="-1">
            {{ 'newsletter.success' | t }}
          </p>
        {% endif %}
      {% endform %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Coming Soon Newsletter",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo Image",
      "info": "Upload your logo. It will appear at the top."
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Desktop Background Image",
      "info": "Choose a full-bleed background photo or illustration for desktop."
    },
    {
      "type": "image_picker",
      "id": "mobile_background_image",
      "label": "Mobile Background Image",
      "info": "Choose a background photo or illustration for mobile devices."
    },
    {
      "type": "text",
      "id": "heading_text",
      "label": "Heading Text",
      "default": "COMING SOON"
    },
    {
      "type": "text",
      "id": "subheading_text",
      "label": "Subheading Text",
      "default": "Subscribe to our newsletter"
    },
    {
      "type": "text",
      "id": "input_placeholder",
      "label": "Email Input Placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Subscribe"
    }
  ],
  "blocks": [],
  "presets": [
    {
      "name": "Coming Soon Newsletter",
      "category": "Newsletter",
      "settings": {
        "logo_image": "",
        "background_image": "",
        "mobile_background_image": "",
        "heading_text": "COMING SOON",
        "subheading_text": "Subscribe to our newsletter",
        "input_placeholder": "Enter your email",
        "button_label": "Subscribe"
      }
    }
  ]
}
{% endschema %}
