{% comment %}
  Editorial Photo Stacked with transitions.
  Each slide fills the viewport and moves on scroll.
{% endcomment %}
<section class="editorial-slider-stack-transitions" id="editorial-slider-stack-transitions">
  {% for block in section.blocks %}
    {% case block.type %}
    {% when 'photo', 'footer' %}
      <div
        class="editorial-slide-block {% if block.type == 'footer' %}footer-slide{% endif %} color-{{ block.settings.color_scheme }}{% if forloop.first %} is-active-slide{% endif %}{% if block.settings.video_desktop != blank %} has-desktop-video{% endif %}{% if block.settings.video_mobile != blank %} has-mobile-video{% endif %}"
        data-slide-index="{{ forloop.index0 }}"
        data-color-scheme="{{ block.settings.color_scheme }}"
        data-header-scheme="{{ block.settings.header_color_scheme }}"
        data-icon-color="{{ block.settings.header_icon_color }}"
        data-logo-invert="{{ block.settings.invert_logo }}"
        data-hide-logo-desktop="{{ block.settings.hide_logo_desktop }}"
        data-hide-logo-mobile="{{ block.settings.hide_logo_mobile }}"
        data-override-logo-position="{{ block.settings.override_logo_position }}"
        data-logo-y="{{ block.settings.logo_position_y }}"
        data-logo-x="{{ block.settings.logo_position_x }}"
        data-logo-width="{{ block.settings.logo_width }}"
        style="
          --border-color: {{ block.settings.border_color }};
          --border-width: {{ block.settings.border_width }}px;
          --caption-color: {{ block.settings.caption_color | default: '#FFFFFF' }};
          --image-rotation: {{ block.settings.image_rotation | default: 0 }}deg;
          --f1-left: {{ block.settings.focus1_x | default: 50 }}%;
          --f1-top: {{ block.settings.focus1_y | default: 50 }}%;
          --f1-left-mobile: {{ block.settings.focus1_x_mobile | default: 50 }}%;
          --f1-top-mobile: {{ block.settings.focus1_y_mobile | default: 50 }}%;
          --f2-left: {{ block.settings.focus2_x | default: 50 }}%;
          --f2-top: {{ block.settings.focus2_y | default: 50 }}%;
          --f2-left-mobile: {{ block.settings.focus2_x_mobile | default: 50 }}%;
          --f2-top-mobile: {{ block.settings.focus2_y_mobile | default: 50 }}%;
        "
      >
      {%- if block.type == 'photo' -%}
        {%- assign desktop_image = block.settings.image_desktop -%}
        {%- assign mobile_image = block.settings.image_mobile -%}
        {%- assign desktop_video = block.settings.video_desktop -%}
        {%- assign mobile_video = block.settings.video_mobile -%}
        {%- assign alt_text = block.settings.caption | escape | default: 'Editorial image' -%}
        {%- assign has_any_image = false -%}
        {%- assign fallback_img_src = "" -%}
        {%- assign fallback_img_width = block.settings.max_width -%}
        {%- if desktop_image != blank -%}
          {%- assign has_any_image = true -%}
          {%- assign fallback_img_src = desktop_image | image_url: width: block.settings.max_width -%}
        {%- elsif mobile_image != blank -%}
          {%- assign has_any_image = true -%}
          {%- assign fallback_img_src = mobile_image | image_url: width: block.settings.max_width_mobile -%}
          {%- assign fallback_img_width = block.settings.max_width_mobile -%}
        {%- endif -%}

        {% if desktop_video != blank %}
          {{ desktop_video | video_tag: autoplay: true, loop: true, controls: false, muted: true, class: 'editorial-slide-video editorial-slide-video-desktop' }}
        {% endif %}
        {% if mobile_video != blank %}
          {{ mobile_video | video_tag: autoplay: true, loop: true, controls: false, muted: true, class: 'editorial-slide-video editorial-slide-video-mobile' }}
        {% endif %}

        {% if has_any_image %}
          <picture class="editorial-slide-picture-element">
            {% if mobile_image != blank %}<source media="(max-width: 750px)" srcset="{{ mobile_image | image_url: width: block.settings.max_width_mobile }}">{% endif %}
            {% if desktop_image != blank %}<source media="(min-width: 751px)" srcset="{{ desktop_image | image_url: width: block.settings.max_width }}">{% endif %}
            <img src="{{ fallback_img_src }}" alt="{{ alt_text }}" class="editorial-slide-image" loading="{% if forloop.first %}eager{% else %}lazy{% endif %}" width="{{ fallback_img_width }}">
          </picture>
        {% else %}
          <div class="editorial-slide-placeholder">{{ 'lifestyle-1' | placeholder_svg_tag: 'placeholder-svg' }}</div>
        {% endif %}

        {%- assign has_caption_content = false -%}
        {%- if block.settings.caption != blank -%}
          {%- assign has_caption_content = true -%}
        {%- endif -%}
        
        {%- assign has_button_content = false -%}
        {%- if block.settings.button_text != blank and block.settings.button_link != blank -%}
          {%- assign has_button_content = true -%}
        {%- endif -%}

        {% if has_caption_content or has_button_content %}
          <div class="editorial-slide-overlay">
            {% if has_caption_content %}<div class="editorial-slide-caption">{{ block.settings.caption }}</div>{% endif %}
            {% if has_button_content %}<a href="{{ block.settings.button_link }}" class="editorial-slide-button">{{ block.settings.button_text }}</a>{% endif %}
          </div>
        {% endif %}

        {% if block.settings.focus1_product != blank %}
          {% assign fp1 = all_products[block.settings.focus1_product] %}
          <div class="focus-point" style="--x: var(--f1-left); --y: var(--f1-top); --x-mobile: var(--f1-left-mobile); --y-mobile: var(--f1-top-mobile);">
            <button type="button" class="focus-point__button" aria-label="{{ fp1.title | escape }}"></button>
            <div class="focus-popout">{% render 'card-product', card_product: fp1, section_id: section.id %}</div>
          </div>
        {% endif %}
        {% if block.settings.focus2_product != blank %}
          {% assign fp2 = all_products[block.settings.focus2_product] %}
          <div class="focus-point" style="--x: var(--f2-left); --y: var(--f2-top); --x-mobile: var(--f2-left-mobile); --y-mobile: var(--f2-top-mobile);">
            <button type="button" class="focus-point__button" aria-label="{{ fp2.title | escape }}"></button>
            <div class="focus-popout">{% render 'card-product', card_product: fp2, section_id: section.id %}</div>
          </div>
        {% endif %}
      {%- elsif block.type == 'footer' -%}
        <div class="footer-desktop">{% render 'footer-drawer-desktop', section: block %}</div>
        <div class="footer-mobile">{% render 'footer-drawer', section: block %}</div>
      {%- endif -%}
      </div>
    {% endcase %}
  {% endfor %}
</section>

<style>
  .editorial-slider-stack-transitions { position: relative; width: 100%; height: 100vh; overflow: hidden; background: transparent; }
  .editorial-slide-block { position: absolute; top: 0; left: 0; width: 100%; height: 100vh; padding: var(--border-width, 0px); background: var(--border-color, #eaeada); box-sizing: border-box; opacity: 0; transform: translateY(100vh); pointer-events: none; }
  .editorial-slide-block.is-active-slide { opacity: 1; transform: translateY(0); pointer-events: auto; }
  body.footer-is-active { overflow-y: auto !important; }
  .editorial-slider-stack-transitions.footer-is-active { overflow: visible; height: auto; min-height: 100vh; display: flex; }
  .editorial-slide-block.footer-slide { display: flex; flex-direction: column; background: #FFFFFF; }
  .editorial-slide-block.footer-slide > .footer-mobile,
  .editorial-slide-block.footer-slide > .footer-desktop { margin-top: auto; }
  .footer-slide.is-settled { position: relative; height: auto; transform: none !important; z-index: 2; width: 100%; flex-grow: 1; min-height: 100vh; }
  @media (min-width: 751px) { .editorial-slide-block.has-desktop-video .editorial-slide-picture-element { display: none; } }
  @media (max-width: 750px) { .editorial-slide-block.has-mobile-video .editorial-slide-picture-element { display: none; } }
  .editorial-slide-picture-element { display: block; width: 100%; height: 100%; overflow: hidden; }
  .editorial-slide-image { display: block; width: 100%; height: 100%; object-fit: cover; transform: rotate(var(--image-rotation, 0deg)); }
  .editorial-slide-video { display: block; width: 100%; height: 100%; object-fit: cover; }
  .editorial-slide-video-desktop { display: block; }
  .editorial-slide-video-mobile { display: none; }
  @media (max-width: 750px) { .footer-desktop { display: none; } }
  @media (min-width: 751px) { .footer-mobile { display: none; } }
  .editorial-slide-placeholder { display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background-color: #f0f0f0; }
  .editorial-slide-placeholder .placeholder-svg { width: 50px; height: 50px; }
  .editorial-slide-overlay { position: absolute; top: var(--border-width, 24px); bottom: var(--border-width, 24px); left: var(--border-width, 24px); right: var(--border-width, 24px); z-index: 2; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top: calc(60vh - var(--border-width, 24px)); pointer-events: none; }
  .editorial-slide-caption { width: auto; max-width: 90%; margin-bottom: 20px; color: var(--caption-color, #FFFFFF); font-size: 3.5rem; font-weight: 700; text-transform: uppercase; text-align: center; letter-spacing: 0.05em; text-shadow: 0px 2px 6px rgba(0, 0, 0, 0.35); background-color: transparent; pointer-events: none; }
  .editorial-slide-button { display: inline-block; padding: 10px 28px; font-size: 0.85rem; color: #FFFFFF; background-color: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255,255,255,0.75); text-decoration: none; text-transform: uppercase; letter-spacing: 0.08em; border-radius: 0; transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; cursor: pointer; pointer-events: auto; }
  .editorial-slide-button:hover, .editorial-slide-button:focus { background-color: #FFFFFF; color: #000000; border-color: #FFFFFF; }
  .focus-point { position: absolute; left: var(--x); top: var(--y); transform: translate(-50%, -50%); z-index: 3; }
  .focus-point__button { width: 14px; height: 14px; padding: 0; border-radius: 50%; background: #ffffff; border: none; cursor: pointer; box-shadow: 0 0 4px 0 rgba(255, 255, 255, 0.7); animation: focus-glow 2s ease-in-out infinite; }
  @keyframes focus-glow { 0%, 100% { box-shadow: 0 0 4px 0 rgba(255, 255, 255, 0.7); } 50% { box-shadow: 0 0 12px 4px rgba(255, 255, 255, 0.9); } }
  .focus-popout { opacity: 0; visibility: hidden; transition: opacity 0.25s ease; position: absolute; top: calc(100% + 8px); left: 50%; transform: translateX(-50%); z-index: 4; background: #ffffff; padding: 8px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25); width: 200px; }
  .focus-point.is-open .focus-popout { opacity: 1; visibility: visible; }
  .footer-slide .footer { margin-bottom: 0 !important; padding-bottom: 0 !important; margin-top: auto !important; }
  .header__icon-desktop > a:link, .header__icon-desktop > a:visited { text-decoration: none; }
  #main-header-logo { transition: top 0.6s ease, left 0.6s ease, width 0.6s ease, opacity 0.4s ease, visibility 0.4s ease; }
  #main-header-logo.header-logo-is-overridden { position: absolute; transform: translate(-50%, -50%); max-width: none; z-index: 1000; }
  @media (min-width: 751px) { #main-header-logo.hide-logo-on-desktop { opacity: 0 !important; visibility: hidden !important; pointer-events: none !important; } }
  @media (max-width: 750px) { #main-header-logo.hide-logo-on-mobile { opacity: 0 !important; visibility: hidden !important; pointer-events: none !important; } }
  @media (max-width: 700px) {
    .editorial-slide-block { height: 100vh; width: 100%; padding: var(--mobile-border-width, 0px); }
    .editorial-slide-video-desktop { display: none; }
    .editorial-slide-video-mobile { display: block; }
    .editorial-slide-overlay { top: var(--mobile-border-width, 8px); bottom: var(--mobile-border-width, 8px); left: var(--mobile-border-width, 8px); right: var(--mobile-border-width, 8px); justify-content: flex-start; padding-top: calc(60vh - var(--mobile-border-width, 8px)); }
    .editorial-slide-caption { font-size: 2rem; margin-bottom: 15px; letter-spacing: 0.03em; text-shadow: 0px 1px 4px rgba(0, 0, 0, 0.4); }
    .editorial-slide-button { font-size: 0.8rem; padding: 8px 20px; background-color: rgba(0, 0, 0, 0.45); border: 1px solid rgba(255,255,255,0.7); }
    .focus-point { left: var(--x-mobile); top: var(--y-mobile); }
    .focus-point__button { width: 10px; height: 10px; }
    .focus-popout { width: 180px; }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('editorial-slider-stack-transitions');
    if (!container) return;
    const cooldownDown = 1200;
    const cooldownUp = 1200;
    const slides = Array.from(container.querySelectorAll('.editorial-slide-block'));
    if (slides.length === 0) return;
    const headerWrapper = document.querySelector('.header-wrapper');
    const headerLogo = headerWrapper ? headerWrapper.querySelector('#main-header-logo') : null;
    const body = document.body;
    let currentIndex = 0;
    let isAnimating = false;
    body.classList.add('is-initializing');
    if (headerWrapper) {
      const headerLinksAndIcons = headerWrapper.querySelectorAll('a, button');
      headerLinksAndIcons.forEach(el => {
        if (!el.contains(headerLogo)) {
          el.classList.add('js-header-link-to-transition');
        }
      });
    }
    slides.forEach(function(slide, index) {
      slide.style.display = index === 0 ? 'block' : 'none';
    });
    function applyHeaderForSlide(slide, withDelay) {
      if (!headerWrapper) return;
      const slideData = slide.dataset;
      if (slideData.headerScheme) {
        headerWrapper.className = headerWrapper.className.replace(/color-[^ ]+/g, 'color-' + slideData.headerScheme);
      }
      if (slideData.iconColor) {
        headerWrapper.style.setProperty('--icon-color', slideData.iconColor);
      } else {
        headerWrapper.style.removeProperty('--icon-color');
      }
      if (headerLogo) {
        headerLogo.classList.toggle('hide-logo-on-desktop', slideData.hideLogoDesktop === 'true');
        headerLogo.classList.toggle('hide-logo-on-mobile', slideData.hideLogoMobile === 'true');
        if (slideData.overrideLogoPosition === 'true') {
          headerLogo.classList.add('header-logo-is-overridden');
          headerLogo.style.left = slideData.logoX + '%';
          headerLogo.style.top = slideData.logoY + '%';
          headerLogo.style.width = slideData.logoWidth + 'px';
        } else {
          headerLogo.classList.remove('header-logo-is-overridden');
          headerLogo.style.left = '';
          headerLogo.style.top = '';
          headerLogo.style.width = '';
        }
        const swapLogo = () => {
          const logoSrc = slideData.logoInvert === 'true'
            ? 'https://cdn.shopify.com/s/files/1/0911/7843/4884/files/cheyenne_final_white_trans.svg?v=1749724697'
            : 'https://cdn.shopify.com/s/files/1/0911/7843/4884/files/cheyenne_final_black_trans.svg?v=1749724445';
          headerLogo.src = logoSrc;
          headerLogo.srcset = logoSrc;
        };
        if (withDelay) {
          const rootStyles = getComputedStyle(document.documentElement);
          const logoDelay = parseFloat(rootStyles.getPropertyValue('--logo-swap-delay').trim()) * 1000;
          setTimeout(swapLogo, logoDelay);
        } else {
          swapLogo();
        }
      }
    }
    function changeSlide(next, reverse) {
      if (isAnimating || next < 0 || next >= slides.length || next === currentIndex) return;
      isAnimating = true;
      const oldSlide = slides[currentIndex];
      const newSlide = slides[next];
      if (oldSlide && oldSlide.classList.contains('footer-slide')) {
        oldSlide.classList.remove('is-settled');
        container.classList.remove('footer-is-active');
        body.classList.remove('footer-is-active');
      }
      if (!newSlide.classList.contains('footer-slide')) {
        body.style.overflow = 'hidden';
      }
      if (oldSlide) oldSlide.style.zIndex = '1';
      newSlide.style.zIndex = '2';
      newSlide.style.transition = 'none';
      newSlide.style.display = 'block';
      newSlide.style.transform = reverse ? 'translateY(-100vh)' : 'translateY(100vh)';
      void newSlide.offsetWidth;
      const rootStyles = getComputedStyle(document.documentElement);
      const duration = reverse ? rootStyles.getPropertyValue('--slide-duration-up').trim() : rootStyles.getPropertyValue('--slide-duration-down').trim();
      const delay = reverse ? rootStyles.getPropertyValue('--slide-delay-up').trim() : rootStyles.getPropertyValue('--slide-delay-down').trim();
      
      newSlide.style.transition = `transform ${duration} cubic-bezier(.65,0,.35,1) ${delay}, opacity ${duration} ease ${delay}`;
      
      applyHeaderForSlide(newSlide, true);
      newSlide.classList.add('is-active-slide');
      newSlide.style.transform = 'translateY(0)';
      const currentCooldown = reverse ? cooldownUp : cooldownDown;
      setTimeout(function() {
        if (oldSlide) {
          oldSlide.style.display = 'none';
          oldSlide.classList.remove('is-active-slide');
          oldSlide.style.zIndex = '';
        }
        newSlide.style.zIndex = '';
        newSlide.style.transition = '';
        if (newSlide.classList.contains('footer-slide')) {
          container.classList.add('footer-is-active');
          body.classList.add('footer-is-active');
          newSlide.classList.add('is-settled');
          newSlide.style.display = ''; 
        }
        currentIndex = next;
        isAnimating = false;
      }, currentCooldown);
    }
    function nextSlide() { changeSlide(currentIndex + 1, false); }
    function previousSlide() { changeSlide(currentIndex - 1, true); }
    function initialize() {
        applyHeaderForSlide(slides[currentIndex], false);
        const activeSlide = slides[currentIndex];
        if (activeSlide.classList.contains('footer-slide')) {
            container.classList.add('footer-is-active');
            body.classList.add('footer-is-active');
            activeSlide.classList.add('is-settled');
        } else {
            body.style.overflow = 'hidden';
        }
        setTimeout(() => {
          body.classList.remove('is-initializing');
        }, 100);
    }
    initialize();
    let touchStartY = 0;
    let touchStartX = 0;
    let isTouching = false;
    window.addEventListener('wheel', function(e) {
      if (isAnimating) return;
      if (body.classList.contains('footer-is-active')) {
        if (e.deltaY < 0 && (window.scrollY === 0 || document.documentElement.scrollTop === 0)) {
          previousSlide();
        }
        return;
      }
      if (e.deltaY > 0) { nextSlide(); } 
      else if (e.deltaY < 0) { previousSlide(); }
    }, { passive: true });
    window.addEventListener('touchstart', function(e) {
        touchStartY = e.touches[0].clientY;
        touchStartX = e.touches[0].clientX;
        isTouching = true;
    }, { passive: true });

    window.addEventListener('touchmove', function(e) {
        if (!isTouching) return;
        const currentY = e.touches[0].clientY;
        const currentX = e.touches[0].clientX;
        const deltaY = currentY - touchStartY;
        const deltaX = currentX - touchStartX;
        if (body.classList.contains('footer-is-active') && deltaY > 0 && Math.abs(deltaY) > Math.abs(deltaX) && (window.scrollY === 0 || document.documentElement.scrollTop === 0)) {
            e.preventDefault();
        }
    }, { passive: false });
    window.addEventListener('touchend', function(e) {
        isTouching = false;
        if (isAnimating) return;
        const touchEndY = e.changedTouches[0].clientY;
        const touchEndX = e.changedTouches[0].clientX;
        const deltaY = touchStartY - touchEndY;
        const deltaX = touchStartX - touchEndX;
        if (Math.abs(deltaY) < 10 && Math.abs(deltaX) < 10) { return; }
        if (Math.abs(deltaY) < Math.abs(deltaX)) { return; }
        const swipeThreshold = 50;
        if (body.classList.contains('footer-is-active')) {
            if (deltaY < -swipeThreshold && (window.scrollY === 0 || document.documentElement.scrollTop === 0)) {
                previousSlide();
            }
        } else {
            if (deltaY > swipeThreshold) { nextSlide(); } 
            else if (deltaY < -swipeThreshold) { previousSlide(); }
        }
    }, { passive: true });
  });
</script>

{% schema %}
{
  "name": "Stacked Transitions",
  "tag": "section",
  "max_blocks": 10,
  "settings": [
    {
      "type": "header",
      "content": "Animation Settings"
    },
    { "type": "range", "id": "slide_duration_down", "min": 0.1, "max": 2.5, "step": 0.1, "unit": "s", "label": "Slide Down: Animation Duration", "default": 0.8 },
    { "type": "range", "id": "slide_delay_down", "min": 0, "max": 2.5, "step": 0.1, "unit": "s", "label": "Slide Down: Animation Delay", "default": 0.1 },
    { "type": "range", "id": "slide_duration_up", "min": 0.1, "max": 2.5, "step": 0.1, "unit": "s", "label": "Slide Up: Animation Duration", "default": 0.8 },
    { "type": "range", "id": "slide_delay_up", "min": 0, "max": 2.5, "step": 0.1, "unit": "s", "label": "Slide Up: Animation Delay", "default": 0.1 },
    { "type": "range", "id": "header_color_delay", "min": 0, "max": 2.5, "step": 0.1, "unit": "s", "label": "Header Color Transition Delay", "info": "Delay before icon and text colors start to fade. The fade itself is a quick 0.3s.", "default": 0.2 },
    { "type": "range", "id": "logo_swap_delay", "min": 0, "max": 2.5, "step": 0.1, "unit": "s", "label": "Logo Swap Delay", "info": "Delay before the logo image file is swapped.", "default": 0.1 }
  ],
  "blocks": [
    {
      "type": "photo",
      "name": "Photo Block",
      "settings": [
        { "type": "header", "content": "Content" },
        { "type": "image_picker", "id": "image_desktop", "label": "Desktop Image" },
        { "type": "image_picker", "id": "image_mobile", "label": "Mobile Image" },
        { "type": "video", "id": "video_desktop", "label": "Desktop Video" },
        { "type": "video", "id": "video_mobile", "label": "Mobile Video" },
        { "type": "text", "id": "caption", "label": "Caption Text", "default": "Image Caption" },
        { "type": "text", "id": "button_text", "label": "Button Text" },
        { "type": "url", "id": "button_link", "label": "Button Link" },
        { "type": "header", "content": "Header and Color" },
        { "type": "color", "id": "border_color", "label": "Slide Background / Border", "default": "#eaeada" },
        { "type": "color", "id": "caption_color", "label": "Caption Color", "default": "#ffffff" },
        { "type": "color_scheme", "id": "header_color_scheme", "label": "Header Color Scheme" },
        { "type": "color", "id": "header_icon_color", "label": "Header Icon & Text Color", "default": "#000000" },
        { "type": "checkbox", "id": "invert_logo", "label": "Use White Logo", "default": false },
        { "type": "header", "content": "Header Logo Overrides" },
        { "type": "checkbox", "id": "hide_logo_desktop", "label": "Hide logo on desktop", "default": false },
        { "type": "checkbox", "id": "hide_logo_mobile", "label": "Hide logo on mobile", "default": false },
        { "type": "checkbox", "id": "override_logo_position", "label": "Override logo position & size", "default": false, "info": "Enable to activate the position and size controls below." },
        { "type": "range", "id": "logo_position_y", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Logo Position (Top)", "default": 50 },
        { "type": "range", "id": "logo_position_x", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Logo Position (Left)", "default": 50 },
        { "type": "range", "id": "logo_width", "min": 50, "max": 400, "step": 5, "unit": "px", "label": "Logo Width", "default": 150 },
        { "type": "header", "content": "Advanced" },
        { "type": "range", "id": "image_rotation", "min": -45, "max": 45, "step": 1, "unit": "deg", "label": "Image Rotation", "default": 0 },
        { "type": "header", "content": "Focal Points" },
        { "type": "product", "id": "focus1_product", "label": "Product 1" },
        { "type": "range", "id": "focus1_x", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Horiz. Position 1", "default": 50 },
        { "type": "range", "id": "focus1_y", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Vert. Position 1", "default": 50 },
        { "type": "product", "id": "focus2_product", "label": "Product 2" },
        { "type": "range", "id": "focus2_x", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Horiz. Position 2", "default": 50 },
        { "type": "range", "id": "focus2_y", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Vert. Position 2", "default": 50 }
      ]
    },
    {
      "type": "footer",
      "name": "Footer",
      "settings": [
        { "type": "color_scheme", "id": "color_scheme", "label": "Color Scheme", "default": "scheme-1" },
        { "type": "color_scheme", "id": "header_color_scheme", "label": "Header Color Scheme", "default": "scheme-1" },
        { "type": "color", "id": "header_icon_color", "label": "Header Icon & Text Color", "default": "#000000" },
        { "type": "checkbox", "id": "invert_logo", "label": "Use White Logo", "default": false },
        { "type": "header", "content": "Header Logo Overrides" },
        { "type": "checkbox", "id": "hide_logo_desktop", "label": "Hide logo on desktop", "default": false },
        { "type": "checkbox", "id": "hide_logo_mobile", "label": "Hide logo on mobile", "default": false },
        { "type": "checkbox", "id": "override_logo_position", "label": "Override logo position & size", "default": false, "info": "Enable to activate the position and size controls below." },
        { "type": "range", "id": "logo_position_y", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Logo Position (Top)", "default": 50 },
        { "type": "range", "id": "logo_position_x", "min": 0, "max": 100, "step": 1, "unit": "%", "label": "Logo Position (Left)", "default": 50 },
        { "type": "range", "id": "logo_width", "min": 50, "max": 400, "step": 5, "unit": "px", "label": "Logo Width", "default": 150 }
      ]
    }
  ],
  "presets": [
    {
      "name": "Stacked Transitions",
      "category": "Image",
      "blocks": [
        { "type": "photo" },
        { "type": "photo" },
        { "type": "footer" }
      ]
    }
  ]
}
{% endschema %}

{%- style -%}
  :root {
    --slide-duration-down: {{ section.settings.slide_duration_down | default: 0.8 }}s;
    --slide-delay-down: {{ section.settings.slide_delay_down | default: 0.1 }}s;
    --slide-duration-up: {{ section.settings.slide_duration_up | default: 0.8 }}s;
    --slide-delay-up: {{ section.settings.slide_delay_up | default: 0.1 }}s;
    --header-color-delay: {{ section.settings.header_color_delay | default: 0.2 }}s;
    --logo-swap-delay: {{ section.settings.logo_swap_delay | default: 0.1 }}s;
  }
  .js-header-link-to-transition {
    color: var(--icon-color) !important;
    fill: var(--icon-color) !important;
  }
  body:not(.is-initializing) .js-header-link-to-transition {
    transition: color 0.3s ease var(--header-color-delay),
                fill 0.3s ease var(--header-color-delay);
  }
  body:not(.is-initializing) .header-wrapper {
    transition: background-color 0.3s ease var(--header-color-delay);
  }
{%- endstyle -%}